[gd_scene load_steps=11 format=3 uid="uid://cps0o1mrwns0y"]

[ext_resource type="Script" path="res://src/UI/main/top.gd" id="1_y8af6"]
[ext_resource type="Script" path="res://src/UI/ScratchWindow/ScratchWindow.gd" id="2_kj7xx"]
[ext_resource type="Script" path="res://src/UI/ScratchWindow/ScratchText.gd" id="2_kuxvr"]
[ext_resource type="PackedScene" uid="uid://bjdpdv5kuk7a1" path="res://src/UI/main/Summary/summary.tscn" id="2_vypgq"]
[ext_resource type="PackedScene" uid="uid://b4io5pwywkwt0" path="res://src/UI/Popups/Spellbook/spellbook_popup.tscn" id="4_3p0xb"]
[ext_resource type="PackedScene" uid="uid://f7hu8qg42gq3" path="res://src/UI/Popups/AddPC/add_pc_popup.tscn" id="6_ak5do"]
[ext_resource type="PackedScene" uid="uid://485pr8rsfr3g" path="res://src/UI/Popups/ManagePCs/manage_PCs.tscn" id="7_x60dx"]

[sub_resource type="Animation" id="Animation_r16hr"]
length = 0.001

[sub_resource type="Animation" id="Animation_cptja"]
resource_name = "flash"
length = 0.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2, 0.5),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(1, 1, 1, 0.117647), Color(1, 1, 1, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_swreb"]
_data = {
"RESET": SubResource("Animation_r16hr"),
"flash": SubResource("Animation_cptja")
}

[node name="Main" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 3
size_flags_vertical = 3
script = ExtResource("1_y8af6")

[node name="Summary" parent="." instance=ExtResource("2_vypgq")]
layout_mode = 1

[node name="SaveFlash" type="ColorRect" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
color = Color(1, 1, 1, 0)

[node name="AnimationPlayer" type="AnimationPlayer" parent="SaveFlash"]
libraries = {
"": SubResource("AnimationLibrary_swreb")
}

[node name="SaveFile" type="FileDialog" parent="."]
initial_position = 2
size = Vector2i(644, 600)
dialog_hide_on_ok = true
access = 2
filters = PackedStringArray("*.json")

[node name="LoadFile" type="FileDialog" parent="."]
title = "Open a File"
initial_position = 2
size = Vector2i(600, 600)
ok_button_text = "Open"
dialog_hide_on_ok = true
file_mode = 0
access = 2
filters = PackedStringArray("*.json")

[node name="ScratchWindow" type="Window" parent="."]
handle_input_locally = false
title = "Scratch Window"
position = Vector2i(350, 150)
size = Vector2i(350, 350)
visible = false
popup_window = true
script = ExtResource("2_kj7xx")

[node name="ScratchText" type="TextEdit" parent="ScratchWindow" groups=["Persist"]]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 3
placeholder_text = "Scratchpad
This is saved"
wrap_mode = 1
script = ExtResource("2_kuxvr")

[node name="SpellbookPopup" parent="." instance=ExtResource("4_3p0xb")]
visible = false
popup_window = true

[node name="AddPCPopup" parent="." instance=ExtResource("6_ak5do")]
visible = false

[node name="ManagePCs" parent="." instance=ExtResource("7_x60dx")]
visible = false

[node name="Help" type="Window" parent="."]
title = "Help"
initial_position = 2
size = Vector2i(600, 500)
visible = false

[node name="TextEdit" type="TextEdit" parent="Help"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_colors/font_readonly_color = Color(1, 1, 1, 1)
text = "Dungeons and Dragons 5e Encounter Manager:
A tool for creating more creative DnD encounters by offloading complex turn tracking and NPC management.

Hotkeys:
	Ctrl + S: 					Save
	Ctrl + Shift + S: 		Save As
	Ctrl + L: 					Load
	Ctrl + T: 					Show Scratch Window
	Ctrl + P: 					Show Spellbook
	
If you have any issues or feature requests, open a ticket on github:
	https://github.com/ChemistryMickey/DnD5e-EncounterManager/issues

This program is released \"as is\" under the GNU GPL.

If you find this valuable and want to help support, feel free to buy me a coffee: <placeholder>"
editable = false
wrap_mode = 1

[connection signal="file_selected" from="SaveFile" to="." method="_on_SaveFile_file_selected"]
[connection signal="file_selected" from="LoadFile" to="." method="_on_LoadFile_file_selected"]
[connection signal="close_requested" from="ScratchWindow" to="ScratchWindow" method="_on_close_requested"]
[connection signal="close_requested" from="SpellbookPopup" to="SpellbookPopup" method="_on_close_requested"]
[connection signal="close_requested" from="Help" to="." method="_on_help_close_requested"]
